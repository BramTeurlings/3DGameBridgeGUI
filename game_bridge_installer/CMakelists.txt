cmake_minimum_required(VERSION 3.23)
project (3DGameBridgeInstaller VERSION 0.1 LANGUAGES CSharp)

# Include CMake utilities for CSharp, for WinForm and WPF application support.

include(CSharpUtilities)

# Define the executable, including any .cs files. 
# The .resx and other Properties files are optional here, but including them makes them visible in the VS solution for easy editing. 
add_executable(3DGameBridgeInstaller
    src/MainForm.cs
    src/MainForm.Designer.cs
    src/MainForm.resx
    src/Program.cs
)

# Set the .NET Framework version for the executable.
set_property(TARGET 3DGameBridgeInstaller PROPERTY DOTNET_SDK "Microsoft.NET.Sdk")
set_property(TARGET 3DGameBridgeInstaller PROPERTY DOTNET_TARGET_FRAMEWORK "net7.0-windows")
set_property(TARGET 3DGameBridgeInstaller PROPERTY VS_GLOBAL_UseWindowsForms  "true")
set_property(TARGET 3DGameBridgeInstaller PROPERTY VS_GLOBAL_ImplicitUsings  "enable")
# Set the executable to be 32-bit.
set_property(TARGET 3DGameBridgeInstaller PROPERTY WIN32_EXECUTABLE TRUE)
# Set the C# language version (defaults to 3.0).
set(CMAKE_CSharp_FLAGS "/langversion:latest")

# Set the source file properties for Windows Forms use.
csharp_set_windows_forms_properties(
    src/MainForm.cs
    src/MainForm.Designer.cs
    src/MainForm.resx
    src/Program.cs
)

# If necessary, link in other library dependencies that were built locally in this source tree.
# target_link_libraries(3DGameBridgeInstaller MyLocalLib)

# If necessary, link in other library/DLL references, such as 3rd party libraries.
# # set_property(TARGET 3DGameBridgeInstaller PROPERTY 
    # VS_DOTNET_REFERENCE_MyThirdPartyLib /path/to/libs/MyThirdPartyLib.dll)

# Add in the .NET reference libraries.
set_property(TARGET 3DGameBridgeInstaller PROPERTY VS_DOTNET_REFERENCES
    "Microsoft.CSharp"
    "System"
    "System.Core"
    "System.Data"
    "System.Drawing"
    "System.Windows.Forms"
)

# SET_PROPERTY(TARGET 3DGameBridgeInstaller PROPERTY VS_PACKAGE_REFERENCES "System.Windows.Forms")